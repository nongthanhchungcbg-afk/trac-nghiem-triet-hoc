<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>H·ªÜ TH·ªêNG √îN LUY·ªÜN KINH T·∫æ CH√çNH TR·ªä M√ÅC-L√äNIN</title>
    <style>
        /* TH√äM META CHO IOS V√Ä ANDROID */
        @viewport {
            width: device-width;
            zoom: 1.0;
        }
        
        @-ms-viewport {
            width: device-width;
        }
        
        /* T·∫§T C·∫¢ CSS C≈® GI·ªÆ NGUY√äN */
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #f8f9fa;
            --dark: #343a40;
            --border: #dee2e6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent; /* T·∫Øt highlight khi ch·∫°m tr√™n mobile */
            -webkit-touch-callout: none; /* T·∫Øt menu ch·ªçn tr√™n iOS */
        }
        
        /* FIX CHO IOS: NgƒÉn zoom khi nh·∫•p ƒë√∫p */
        input, textarea, select {
            font-size: 16px; /* NgƒÉn zoom tr√™n iOS */
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden; /* NgƒÉn cu·ªôn ngang */
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Card chung */
        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            margin-bottom: 20px;
            -webkit-overflow-scrolling: touch; /* Cu·ªôn m∆∞·ª£t tr√™n iOS */
        }
        
        /* Header */
        .header {
            background: var(--primary);
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 5px solid var(--secondary);
        }
        
        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            -webkit-user-select: none; /* NgƒÉn ch·ªçn text tr√™n mobile */
            user-select: none;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* N√∫t */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            -webkit-appearance: none; /* X√≥a style m·∫∑c ƒë·ªãnh tr√™n iOS */
            -moz-appearance: none;
            appearance: none;
            touch-action: manipulation; /* C·∫£i thi·ªán ph·∫£n h·ªìi c·∫£m ·ª©ng */
        }
        
        /* TH√äM N√öT DANH S√ÅCH C√ÇU H·ªéI */
        .question-list-btn {
            width: 100%;
            background: var(--secondary);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            touch-action: manipulation;
        }
        
        .question-list-btn .arrow {
            transition: transform 0.3s;
        }
        
        .question-list-btn.active .arrow {
            transform: rotate(180deg);
        }
        
        .btn-primary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
        }
        
        .btn-outline:hover {
            background: var(--secondary);
            color: white;
        }
        
        /* Trang ch·ªß */
        .home-screen {
            display: block;
        }
        
        .home-content {
            padding: 30px;
        }
        
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .topic-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--secondary);
            cursor: pointer;
            transition: all 0.3s;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
        }
        
        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background: #e9ecef;
        }
        
        .topic-card h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1rem;
        }
        
        .topic-card .progress {
            height: 5px;
            background: #ddd;
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .topic-card .progress-bar {
            height: 100%;
            background: var(--success);
            width: 0%;
            transition: width 0.5s;
        }
        
        /* Giao di·ªán c√¢u h·ªèi - ƒê√É S·ª¨A */
        .quiz-screen {
            display: none;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: #f8f9fa;
            border-bottom: 1px solid var(--border);
        }
        
        .question-list {
            padding: 20px;
        }
        
        /* DANH S√ÅCH C√ÇU H·ªéI M·ªöI - NH·ªé G·ªåN H∆†N */
        .question-grid-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
            margin-bottom: 20px;
        }
        
        .question-grid-container.show {
            max-height: 150px; /* Chi·ªÅu cao t·ªëi ƒëa khi hi·ªán */
        }
        
        .question-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr); /* TƒÉng l√™n 10 c·ªôt ƒë·ªÉ nh·ªè h∆°n */
            gap: 8px; /* Gi·∫£m kho·∫£ng c√°ch */
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            max-height: 120px; /* Gi·ªõi h·∫°n chi·ªÅu cao */
            overflow-y: auto; /* Cu·ªôn n·∫øu nhi·ªÅu c√¢u */
            -webkit-overflow-scrolling: touch; /* Cu·ªôn m∆∞·ª£t tr√™n iOS */
        }
        
        .question-number {
            width: 32px; /* Nh·ªè h∆°n */
            height: 32px; /* Nh·ªè h∆°n */
            display: flex;
            align-items: center;
            justify-content: center;
            background: #e9ecef;
            border-radius: 6px;
            font-weight: 600;
            font-size: 13px; /* Ch·ªØ nh·ªè h∆°n */
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
            margin: 0 auto;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            touch-action: manipulation;
        }
        
        .question-number:hover {
            background: #dee2e6;
            transform: scale(1.05);
        }
        
        .question-number.active {
            background: var(--secondary);
            color: white;
            box-shadow: 0 3px 8px rgba(52, 152, 219, 0.3);
        }
        
        .question-number.answered {
            background: var(--success);
            color: white;
        }
        
        .question-number.current {
            border-color: var(--warning);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(243, 156, 18, 0); }
            100% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0); }
        }
        
        .question-content {
            padding: 20px;
        }
        
        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--primary);
            line-height: 1.5;
            white-space: pre-line; /* Gi·ªØ xu·ªëng d√≤ng */
            -webkit-user-select: none;
            user-select: none;
        }
        
        /* C√°c lo·∫°i c√¢u h·ªèi */
        .options-container {
            margin: 20px 0;
        }
        
        .option-item {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.2s;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            touch-action: manipulation;
        }
        
        .option-item:hover {
            background: #e9ecef;
        }
        
        .option-item.selected {
            border-color: var(--secondary);
            background: #e3f2fd;
        }
        
        .option-item.correct {
            border-color: var(--success);
            background: #d4edda;
        }
        
        .option-item.wrong {
            border-color: var(--danger);
            background: #f8d7da;
        }
        
        /* Giao di·ªán k√©o th·∫£ */
        .drag-container {
            margin: 20px 0;
        }
        
        .drag-instruction {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--warning);
        }
        
        .drag-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 20px;
            background: #f1f8ff;
            border-radius: 10px;
            margin-bottom: 20px;
            min-height: 80px;
            border: 2px dashed #a3d0ff;
        }
        
        .drag-item {
            padding: 10px 15px;
            background: white;
            border: 2px solid var(--secondary);
            border-radius: 6px;
            cursor: grab;
            user-select: none;
            transition: all 0.2s;
            touch-action: manipulation;
        }
        
        .drag-item:hover {
            background: #e3f2fd;
            transform: translateY(-2px);
        }
        
        .drag-item.dragging {
            opacity: 0.5;
        }
        
        .drop-zones {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .drop-zone {
            min-height: 100px;
            padding: 15px;
            border: 2px dashed #aaa;
            border-radius: 10px;
            background: #f8f9fa;
        }
        
        .drop-zone-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .drop-zone.dragover {
            border-color: var(--secondary);
            background: #e3f2fd;
        }
        
        /* Giao di·ªán ƒê√∫ng/Sai - ƒê√É S·ª¨A */
        .truefalse-container {
            margin: 20px 0;
        }
        
        .truefalse-item {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #ddd;
            transition: all 0.3s;
        }
        
        .truefalse-item.selected-true {
            border-left-color: var(--success);
            background: #e8f5e9;
        }
        
        .truefalse-item.selected-false {
            border-left-color: var(--danger);
            background: #ffebee;
        }
        
        .truefalse-item.correct {
            border-left-color: var(--success);
            background: #d4edda;
        }
        
        .truefalse-item.wrong {
            border-left-color: var(--danger);
            background: #f8d7da;
        }
        
        .truefalse-text {
            margin-bottom: 15px;
            line-height: 1.5;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .truefalse-buttons {
            display: flex;
            gap: 10px;
        }
        
        .truefalse-buttons button {
            flex: 1;
            padding: 10px;
            font-size: 14px;
            touch-action: manipulation;
        }
        
        /* Giao di·ªán k·∫øt qu·∫£ */
        .result-screen {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }
        
        .result-icon {
            font-size: 4rem;
            color: var(--secondary);
            margin: 20px 0;
        }
        
        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
            margin: 20px 0;
        }
        
        .score-details {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .score-box {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            min-width: 150px;
        }
        
        .score-box h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .score-box .number {
            font-size: 2rem;
            font-weight: bold;
        }
        
        .correct-answers .number {
            color: var(--success);
        }
        
        .wrong-answers .number {
            color: var(--danger);
        }
        
        /* Footer v√† controls */
        .quiz-controls {
            display: flex;
            justify-content: space-between;
            padding: 20px 30px;
            background: #f8f9fa;
            border-top: 1px solid var(--border);
        }
        
        .timer {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .controls-right {
            display: flex;
            gap: 10px;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: white;
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 20px;
        }
        
        /* TRUE/FALSE G·ªåN G√ÄNG */
.truefalse-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 15px;
}

.truefalse-text {
    flex: 1;
    font-size: 15px;
}

.truefalse-buttons {
    display: flex;
    gap: 8px;
}

.truefalse-buttons button {
    background: white;
    color: #333;
    border: 2px solid #ccc;
    padding: 6px 14px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.2s;
}

/* Khi ch·ªçn ƒê√öNG */
.truefalse-buttons button.selected.true {
    background: #2ecc71;
    color: white;
    border-color: #2ecc71;
}

/* Khi ch·ªçn SAI */
.truefalse-buttons button.selected.false {
    background: #e74c3c;
    color: white;
    border-color: #e74c3c;
}


.drag-wrapper {
    border: 1px dashed #bbb;
    padding: 15px;
    border-radius: 10px;
    margin-top: 15px;
}

.drop-col {
    border: 1px dashed #aaa;
    padding: 10px;
    border-radius: 8px;
    background: #fafafa;
}

.drop-title {
    font-weight: bold;
    margin-bottom: 8px;
}

.drop-placeholder {
    color: #999;
    font-style: italic;
    font-size: 13px;
    pointer-events: none;
}

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
            }
            
            .question-grid {
                grid-template-columns: repeat(5, 1fr); /* Gi·∫£m c·ªôt tr√™n mobile */
                max-height: 150px;
            }
            
            .question-grid-container.show {
                max-height: 200px; /* Cao h∆°n tr√™n mobile */
            }
            
            .drop-zones {
                grid-template-columns: 1fr;
            }
            
            .quiz-controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .score-details {
                flex-direction: column;
                align-items: center;
            }
            
            /* FIX CHO IOS: C·∫£i thi·ªán k√≠ch th∆∞·ªõc ch·ªØ v√† kho·∫£ng c√°ch */
            .btn {
                padding: 14px 20px; /* L·ªõn h∆°n ƒë·ªÉ d·ªÖ ch·∫°m */
                min-height: 44px; /* K√≠ch th∆∞·ªõc t·ªëi thi·ªÉu cho touch */
            }
            
            .option-item {
                padding: 16px;
                min-height: 44px;
            }
            
            .truefalse-buttons button {
                padding: 14px;
                min-height: 44px;
            }
        }
        
        @media (max-width: 480px) {
            .question-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .question-number {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
            
            .score-display {
                font-size: 2.5rem;
            }
        }
        
        /* Fix cho Safari iOS */
        @supports (-webkit-touch-callout: none) {
            .card {
                -webkit-backdrop-filter: blur(10px);
                backdrop-filter: blur(10px);
            }
            
            .btn, .option-item, .question-number {
                -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            }
        }
        
        /* Fix cho Android Chrome */
        @supports not (-webkit-touch-callout: none) {
            .card {
                backdrop-filter: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Trang ch·ªß -->
        <div id="home-screen" class="card home-screen">
            <div class="header">
                <h1>H·ªÜ TH·ªêNG √îN LUY·ªÜN 15'</h1>
                <div class="subtitle">NTC</div>
            </div>
            
            <div class="home-content">
                <h2 id="choose-subject-title">Ch·ªçn H·ªçc Ph·∫ßn:</h2>


<button id="back-home-btn" onclick="backToHome()" style="display:none;">
    ‚Üê Tr·ªü l·∫°i
</button>
<h2 id="subject-title" style="margin:15px 0; color:#2c3e50;"></h2>
                <div class="topics-grid" id="topics-container">
                    <!-- C√°c ch·ªß ƒë·ªÅ s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
                </div>
                
                <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                    <p style="color: var(--dark); font-size: 0.9rem;">
                        <b>L∆∞u √Ω:</b> <br>
                        H√£y li√™n h·ªá t√¥i ƒë·ªÉ c√≥ nhi·ªÅu b√†i t·∫≠p ƒë·ªÉ √¥n luy·ªán h∆°n: <b><i>**********</i></b>
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Giao di·ªán c√¢u h·ªèi -->
        <div id="quiz-screen" class="card quiz-screen">
            <div class="quiz-header">
                <div>
                    <button class="btn btn-outline" onclick="goHome()">‚Üê Trang Ch·ªß</button>
                </div>
                <div class="timer" id="timer">00:00</div>
                <div>
                    <span id="current-topic">Ch·ªß ƒë·ªÅ 1</span>
                </div>
            </div>
            
            <div class="question-list">
                <!-- TH√äM N√öT DANH S√ÅCH C√ÇU H·ªéI -->
                <button class="question-list-btn" onclick="toggleQuestionList()" id="questionListBtn">
                    <span>Danh s√°ch c√¢u h·ªèi</span>
                    <span class="arrow">‚ñº</span>
                </button>
                
                <!-- DANH S√ÅCH C√ÇU H·ªéI M·ªöI - ·∫®N BAN ƒê·∫¶U -->
                <div id="question-grid-container" class="question-grid-container">
                    <div id="question-numbers" class="question-grid">
                        <!-- C√°c s·ªë c√¢u h·ªèi s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
                    </div>
                </div>
                
                <div id="question-content" class="question-content">
                    <!-- N·ªôi dung c√¢u h·ªèi s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
                </div>
            </div>
            
            <div class="quiz-controls">
                <div>
                    <button class="btn btn-primary" id="prev-btn" onclick="prevQuestion()">‚Üê C√¢u tr∆∞·ªõc</button>
                    <button onclick="shuffleAll()">üîÄ ƒê·∫£o c√¢u h·ªèi</button>

                </div>
                <div class="controls-right">
                    <button class="btn btn-warning" onclick="resetQuestion()">L√†m l·∫°i</button>
                    <button class="btn btn-success" id="next-btn" onclick="nextQuestion()">C√¢u ti·∫øp theo ‚Üí</button>
                    <button class="btn btn-danger" id="submit-btn" onclick="submitQuiz()" style="display: none;">N·ªôp b√†i</button>
                </div>
            </div>
        </div>
        
        <!-- Giao di·ªán k·∫øt qu·∫£ -->
        <div id="result-screen" class="card result-screen">
            <div class="header">
                <h1>K·∫øt qu·∫£ b√†i thi</h1>
            </div>
            
            <div class="result-content">
                <div class="result-icon">üìä</div>
                <div class="score-display" id="final-score">0/30</div>
                <div style="margin-bottom: 30px;">
                    <h3>Th·ªùi gian ho√†n th√†nh: <span id="final-time">00:00</span></h3>
                    <h3>Thang 10: <span id="score-ten">0.0</span>/10</h3>
                </div>
                
                <div class="score-details">
                    <div class="score-box correct-answers">
                        <h3>ƒê√°p √°n ƒë√∫ng</h3>
                        <div class="number" id="correct-count">0</div>
                    </div>
                    <div class="score-box wrong-answers">
                        <h3>ƒê√°p √°n sai</h3>
                        <div class="number" id="wrong-count">0</div>
                    </div>
                </div>
                
                <div style="margin-top: 40px;">
                    <button class="btn btn-primary" onclick="retryQuiz()">L√†m l·∫°i</button>
                    <button class="btn btn-outline" onclick="goHome()" style="margin-left: 10px;">V·ªÅ trang ch·ªß</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        ¬© 2026 H·ªá th·ªëng √¥n luy·ªán KTTT_M√°c-L√™Nin
    </div>

    <script>
        // D·ªØ li·ªáu c√¢u h·ªèi
        // D·ªØ li·ªáu c√¢u h·ªèi
// TH√äM V√ÄO PH·∫¶N DATA C·ª¶A CODE HI·ªÜN T·∫†I
// T√¨m ph·∫ßn data v√† th√™m c√¢u h·ªèi cho CNPM Ch·ªß ƒë·ªÅ 1

const data = {
  cnpm: {
    name: "C√îNG NGH·ªÜ PH·∫¶N M·ªÄM",
    topics: {
      1: { 
        name: "Ch·ªß ƒë·ªÅ 1: T·ªïng quan v·ªÅ c√¥ng ngh·ªá ph·∫ßn m·ªÅm", 
        questions: [
          {
            type: "single",
            q: "C√¢u 1: Kh√°i ni·ªám 'ph·∫ßn c·ª©ng m√°y t√≠nh' ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a nh∆∞ th·∫ø n√†o?",
            options: [
              "T·∫≠p h·ª£p c√°c th√†nh ph·∫ßn v·∫≠t l√Ω t·∫°o n√™n m·ªôt h·ªá th·ªëng m√°y t√≠nh.",
              "T·∫≠p h·ª£p c√°c ph·∫ßn m·ªÅm v√† ·ª©ng d·ª•ng ch·∫°y tr√™n m√°y t√≠nh.",
              "T·∫≠p h·ª£p c√°c d·ªØ li·ªáu v√† th√¥ng tin l∆∞u tr·ªØ trong m√°y t√≠nh.",
              "T·∫≠p h·ª£p c√°c giao th·ª©c m·∫°ng v√† k·∫øt n·ªëi Internet."
            ],
            correct: 0
          },
          {
            type: "single",
            q: "C√¢u 2: ƒê√¢u l√† ƒë·∫∑c tr∆∞ng c·ªßa ph·∫ßn m·ªÅm?",
            options: [
              "Kh√¥ng m√≤n c≈©, nh∆∞ng tho√°i h√≥a theo th·ªùi gian.",
              "M√≤n c≈©, nh∆∞ng kh√¥ng tho√°i h√≥a theo th·ªùi gian.",
              "M√≤n c≈© v√† tho√°i h√≥a theo th·ªùi gian.",
              "Kh√¥ng m√≤n c≈©, kh√¥ng tho√°i h√≥a theo th·ªùi gian."
            ],
            correct: 0
          },
          {
            type: "single",
            q: "C√¢u 3: Ph√¢n lo·∫°i ph·∫ßn m·ªÅm theo ch·ª©c nƒÉng g·ªìm nh·ªØng lo·∫°i ph·∫ßn m·ªÅm n√†o sau ƒë√¢y?",
            options: [
              "Ph·∫ßn m·ªÅm h·ªá th·ªëng, ph·∫ßn m·ªÅm nghi·ªáp v·ª•, ph·∫ßn m·ªÅm c√¥ng c·ª•.",
              "Ch∆∞∆°ng tr√¨nh, s·∫£n ph·∫©m, h·ªá th·ªëng.",
              "Ph·∫ßn m·ªÅm h·ªá th·ªëng, ph·∫ßn m·ªÅm th·ªùi gian th·ª±c.",
              "Ph·∫ßn m·ªÅm h·ªá ƒëi·ªÅu h√†nh, ch∆∞∆°ng tr√¨nh, ph·∫ßn m·ªÅm nh√∫ng."
            ],
            correct: 0
          },
          {
            type: "single",
            q: "C√¢u 4: Ph√¢n lo·∫°i ph·∫ßn m·ªÅm theo lƒ©nh v·ª±c ·ª©ng d·ª•ng g·ªìm nh·ªØng lo·∫°i n√†o sau ƒë√¢y?",
            options: [
              "Ph·∫ßn m·ªÅm h·ªá th·ªëng, ph·∫ßn m·ªÅm nghi·ªáp v·ª•, ph·∫ßn m·ªÅm th·ªùi gian th·ª±c, ph·∫ßn m·ªÅm khoa h·ªçc k·ªπ thu·∫≠t, ph·∫ßn m·ªÅm nh√∫ng.",
              "Ph·∫ßn m·ªÅm h·ªá th·ªëng, ph·∫ßn m·ªÅm th·ªùi gian th·ª±c, Ph·∫ßn m·ªÅm h·ªá ƒëi·ªÅu h√†nh, ch∆∞∆°ng tr√¨nh, s·∫£n ph·∫©m, ph·∫ßn m·ªÅm khoa h·ªçc k·ªπ thu·∫≠t.",
              "Ch∆∞∆°ng tr√¨nh, s·∫£n ph·∫©m, h·ªá th·ªëng, Ph·∫ßn m·ªÅm h·ªá ƒëi·ªÅu h√†nh, ph·∫ßn m·ªÅm nh√∫ng.",
              "Ph·∫ßn m·ªÅm h·ªá ƒëi·ªÅu h√†nh, ch∆∞∆°ng tr√¨nh, ph·∫ßn m·ªÅm nh√∫ng, ph·∫ßn m·ªÅm khoa h·ªçc k·ªπ thu·∫≠t."
            ],
            correct: 0
          },
          {
            type: "single",
            q: "C√¢u 5: ƒê·∫∑c ƒëi·ªÉm n√†o sau ƒë√¢y KH√îNG ph·∫£i l√† ƒë·∫∑c tr∆∞ng c·ªßa ph·∫ßn m·ªÅm s·∫£n ph·∫©m ƒë·∫∑t h√†ng?",
            options: [
              "Th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªông r√£i tr√™n th·ªã tr∆∞·ªùng.",
              "C√≥ th·ªÉ t√≠ch h·ª£p c√°c t√≠nh nƒÉng ƒë·∫∑c bi·ªát theo y√™u c·∫ßu.",
              "ƒê∆∞·ª£c ph√°t tri·ªÉn theo y√™u c·∫ßu ri√™ng c·ªßa kh√°ch h√†ng.",
              "C√≥ chi ph√≠ ph√°t tri·ªÉn cao h∆°n so v·ªõi s·∫£n ph·∫©m chung."
            ],
            correct: 0
          },
          {
            type: "single",
            q: "C√¢u 6: D·ª± √°n ph√°t tri·ªÉn m·ªôt ph·∫ßn m·ªÅm qu·∫£n l√Ω kho h√†ng, t√≠ch h·ª£p v·ªõi h·ªá th·ªëng k·∫ø to√°n v√† h·ªá th·ªëng qu·∫£n l√Ω b√°n h√†ng. Lo·∫°i ph·∫ßn m·ªÅm n√†o ph√π h·ª£p nh·∫•t v·ªõi d·ª± √°n n√†y?",
            options: [
              "Ch∆∞∆°ng tr√¨nh.",
              "S·∫£n ph·∫©m.",
              "T·∫•t c·∫£ ƒë·ªÅu sai.",
              "H·ªá th·ªëng."
            ],
            correct: 3
          },
          {
            type: "single",
            q: "C√¢u 7: M·ªôt l·∫≠p tr√¨nh vi√™n t·ª± vi·∫øt m·ªôt c√¥ng c·ª• nh·ªè ƒë·ªÉ t·ª± ƒë·ªông h√≥a m·ªôt s·ªë t√°c v·ª• l·∫∑p ƒëi l·∫∑p l·∫°i trong c√¥ng vi·ªác h√†ng ng√†y c·ªßa m√¨nh. C√¥ng c·ª• n√†y thu·ªôc lo·∫°i ph·∫ßn m·ªÅm n√†o?",
            options: [
              "Ch∆∞∆°ng tr√¨nh.",
              "S·∫£n ph·∫©m ƒë·∫°i tr√†.",
              "H·ªá th·ªëng.",
              "S·∫£n ph·∫©m."
            ],
            correct: 0
          },
          {
            type: "single",
            q: "C√¢u 8: Trong tr∆∞·ªùng h·ª£p n√†o d∆∞·ªõi ƒë√¢y, vi·ªác m·ªôt ng∆∞·ªùi v·ª´a vi·∫øt v·ª´a s·ª≠ d·ª•ng ch∆∞∆°ng tr√¨nh l√† ph√π h·ª£p nh·∫•t?",
            options: [
              "Ph√°t tri·ªÉn m·ªôt ph·∫ßn m·ªÅm th∆∞∆°ng m·∫°i l·ªõn.",
              "Ph√°t tri·ªÉn m·ªôt h·ªá th·ªëng qu·∫£n l√Ω c∆° s·ªü d·ªØ li·ªáu.",
              "T·∫°o m·ªôt tr√≤ ch∆°i ƒëi·ªán t·ª≠ ƒëa ng∆∞·ªùi ch∆°i.",
              "T·∫°o m·ªôt c√¥ng c·ª• h·ªó tr·ª£ nh·ªè cho c√¥ng vi·ªác c√° nh√¢n."
            ],
            correct: 3
          },
          {
            type: "single",
            q: "C√¢u 9: ƒê·ªÉ gi·∫£m th·ªùi gian ph√°t tri·ªÉn ph·∫ßn m·ªÅm, doanh nghi·ªáp n√™n l√†m g√¨?",
            options: [
              "T·ª± ph√°t tri·ªÉn ph·∫ßn m·ªÅm m√† kh√¥ng c·∫ßn ƒë·∫øn c√°c c√¥ng ty t∆∞ v·∫•n.",
              "Ch·ªçn c√°c gi·∫£i ph√°p ph·∫ßn m·ªÅm c√≥ s·∫µn tr√™n th·ªã tr∆∞·ªùng.",
              "Ch·ªâ t·∫≠p trung v√†o ph√°t tri·ªÉn c√°c t√≠nh nƒÉng c·ªët l√µi.",
              "Kh√¥ng c·∫ßn thi·∫øt ph·∫£i ki·ªÉm th·ª≠ ph·∫ßn m·ªÅm k·ªπ l∆∞·ª°ng."
            ],
            correct: 1
          },
          {
            type: "single",
            q: "C√¢u 10: Khi n√†o doanh nghi·ªáp n√™n l·ª±a ch·ªçn ph·∫ßn m·ªÅm nghi·ªáp v·ª• ƒë·∫∑t h√†ng thay v√¨ s·ª≠ d·ª•ng ph·∫ßn m·ªÅm th∆∞∆°ng m·∫°i s·∫µn c√≥?",
            options: [
              "Khi doanh nghi·ªáp mu·ªën c√≥ m·ªôt gi·∫£i ph√°p ph·∫ßn m·ªÅm s·∫µn c√≥ v√† d·ªÖ s·ª≠ d·ª•ng",
              "Khi doanh nghi·ªáp mu·ªën ti·∫øt ki·ªám chi ph√≠ v√† c·∫ßn tri·ªÉn khai ph·∫ßn m·ªÅm trong th·ªùi gian ng·∫Øn",
              "Khi doanh nghi·ªáp mu·ªën m·ªôt gi·∫£i ph√°p ph·∫ßn m·ªÅm ƒë·ªôc ƒë√°o v√† ph√π h·ª£p v·ªõi quy tr√¨nh l√†m vi·ªác ri√™ng",
              "Khi doanh nghi·ªáp c√≥ quy m√¥ nh·ªè v√† nhu c·∫ßu ƒë∆°n gi·∫£n."
            ],
            correct: 2
          },
          {
            type: "single",
            q: "C√¢u 11: Ph·∫ßn m·ªÅm ·ª©ng d·ª•ng v√† ph·∫ßn m·ªÅm h·ªá th·ªëng kh√°c nhau ·ªü ƒëi·ªÉm n√†o?",
            options: [
              "Ph·∫ßn m·ªÅm ·ª©ng d·ª•ng th·ª±c hi·ªán c√°c t√°c v·ª• c·ª• th·ªÉ theo y√™u c·∫ßu c·ªßa ng∆∞·ªùi d√πng, c√≤n ph·∫ßn m·ªÅm h·ªá th·ªëng qu·∫£n l√Ω v√† ƒëi·ªÅu khi·ªÉn ph·∫ßn c·ª©ng c·ªßa m√°y t√≠nh",
              "Ph·∫ßn m·ªÅm ·ª©ng d·ª•ng gi√∫p m√°y t√≠nh ho·∫°t ƒë·ªông, c√≤n ph·∫ßn m·ªÅm h·ªá th·ªëng gi√∫p ng∆∞·ªùi d√πng th·ª±c hi·ªán c√¥ng vi·ªác",
              "Ph·∫ßn m·ªÅm ·ª©ng d·ª•ng th∆∞·ªùng c√≥ giao di·ªán ph·ª©c t·∫°p h∆°n ph·∫ßn m·ªÅm h·ªá th·ªëng",
              "Ph·∫ßn m·ªÅm ·ª©ng d·ª•ng ƒë∆∞·ª£c c√†i ƒë·∫∑t s·∫µn trong m√°y t√≠nh, c√≤n ph·∫ßn m·ªÅm h·ªá th·ªëng c·∫ßn ƒë∆∞·ª£c c√†i ƒë·∫∑t th√™m"
            ],
            correct: 0
          },
          {
            type: "single",
            q: "C√¢u 12: Ph·∫ßn m·ªÅm ƒë·∫°i tr√† th∆∞·ªùng c√≥ ∆∞u ƒëi·ªÉm g√¨ so v·ªõi s·∫£n ph·∫©m ƒë·∫∑t h√†ng?",
            options: [
              "Th·ªùi gian ph√°t tri·ªÉn ng·∫Øn h∆°n.",
              "Th√≠ch h·ª£p v·ªõi nhi·ªÅu lo·∫°i h√¨nh doanh nghi·ªáp kh√°c nhau.",
              "Chi ph√≠ ph√°t tri·ªÉn cao h∆°n.",
              "Kh·∫£ nƒÉng t√πy bi·∫øn cao h∆°n."
            ],
            correct: 1
          },
          {
            type: "truefalse",
            q: "C√¢u 13: C√°c ph√°t bi·ªÉu sau ƒë√∫ng hay sai?",
            options: [
              { text: "Ph·∫ßn c·ª©ng c√≥ th·ªÉ ho·∫°t ƒë·ªông ƒë·ªôc l·∫≠p m√† kh√¥ng c·∫ßn ph·∫ßn m·ªÅm.", correct: false },
              { text: "Hi·ªáu nƒÉng ho·∫°t ƒë·ªông c·ªßa h·ªá th·ªëng ph·ª• thu·ªôc v√†o c·∫£ ph·∫ßn c·ª©ng v√† ph·∫ßn m·ªÅm.", correct: true },
              { text: "Ph·∫ßn c·ª©ng l√† ph·∫ßn c√≥ th·ªÉ thay th·∫ø ho·∫∑c n√¢ng c·∫•p trong h·ªá th·ªëng m√°y t√≠nh.", correct: true },
              { text: "Ph·∫ßn c·ª©ng bao g·ªìm c√°c thi·∫øt b·ªã v·∫≠t l√Ω c√≥ th·ªÉ c·∫ßm n·∫Øm ƒë∆∞·ª£c nh∆∞ CPU, b√†n ph√≠m, ·ªï ƒëƒ©a.", correct: true }
            ]
          },
          {
            type: "truefalse",
            q: "C√¢u 14: C√°c ph√°t bi·ªÉu sau ƒë√∫ng hay sai?",
            options: [
              { text: "Ph·∫ßn m·ªÅm kh√¥ng th·ªÉ ho·∫°t ƒë·ªông n·∫øu kh√¥ng c√≥ ph·∫ßn c·ª©ng h·ªó tr·ª£.", correct: true },
              { text: "Ph·∫ßn m·ªÅm ho√†n ch·ªânh bao g·ªìm ch∆∞∆°ng tr√¨nh, d·ªØ li·ªáu v√† c√°c t√†i li·ªáu li√™n quan.", correct: true },
              { text: "Ph·∫ßn m·ªÅm l√† 'linh h·ªìn' c·ªßa h·ªá th·ªëng m√°y t√≠nh, ƒëi·ªÅu khi·ªÉn ph·∫ßn c·ª©ng th·ª±c thi nhi·ªám v·ª•.", correct: true },
              { text: "Ph·∫ßn m·ªÅm ch·ªâ bao g·ªìm m√£ ngu·ªìn ƒë∆∞·ª£c vi·∫øt b·∫±ng ng√¥n ng·ªØ l·∫≠p tr√¨nh.", correct: false }
            ]
          },
          {
            type: "truefalse",
            q: "C√¢u 15: C√°c ph√°t bi·ªÉu sau ƒë√∫ng hay sai? (V·ªÅ C√¥ng ngh·ªá ph·∫ßn m·ªÅm)",
            options: [
              { text: "M·ª•c ti√™u c·ªßa c√¥ng ngh·ªá ph·∫ßn m·ªÅm l√† t·∫°o ra s·∫£n ph·∫©m ƒë√∫ng h·∫°n, ƒë√∫ng y√™u c·∫ßu v√† trong gi·ªõi h·∫°n chi ph√≠.", correct: true },
              { text: "Sau khi ƒë∆∞·ª£c ph√°t tri·ªÉn, ph·∫ßn m·ªÅm kh√¥ng b·ªã hao m√≤n theo th·ªùi gian s·ª≠ d·ª•ng nh∆∞ ph·∫ßn c·ª©ng, nh∆∞ng n√≥ c√≥ th·ªÉ b·ªã l·ªói th·ªùi v√† c·∫ßn ƒë∆∞·ª£c duy tr√¨/c·∫≠p nh·∫≠t.", correct: true },
              { text: "C√¥ng ngh·ªá ph·∫ßn m·ªÅm t·∫≠p trung v√†o l·∫≠p tr√¨nh, kh√¥ng ƒë·ªÅ c·∫≠p ƒë·∫øn qu·∫£n l√Ω hay ch·∫•t l∆∞·ª£ng.", correct: false },
              { text: "C√¥ng ngh·ªá ph·∫ßn m·ªÅm nghi√™n c·ª©u m·ªçi kh√≠a c·∫°nh c·ªßa quy tr√¨nh ph√°t tri·ªÉn ph·∫ßn m·ªÅm.", correct: true }
            ]
          },
          {
            type: "truefalse",
            q: "C√¢u 16: C√°c ph√°t bi·ªÉu sau ƒë√∫ng hay sai?",
            options: [
              { text: "C√¥ng ngh·ªá ph·∫ßn m·ªÅm ch·ªâ t·∫≠p trung v√†o c√°c kh√≠a c·∫°nh k·ªπ thu·∫≠t c·ªßa vi·ªác ph√°t tri·ªÉn ph·∫ßn m·ªÅm m√† b·ªè qua y·∫øu t·ªë qu·∫£n l√Ω d·ª± √°n.", correct: false },
              { text: "'H·ªá th·ªëng ph·∫ßn m·ªÅm' l√† t·∫≠p h·ª£p c·ªßa nhi·ªÅu s·∫£n ph·∫©m ph·∫ßn m·ªÅm nh∆∞ng kh√¥ng li√™n quan ƒë·∫øn ph·∫ßn c·ª©ng.", correct: false },
              { text: "'Ch∆∞∆°ng tr√¨nh' th∆∞·ªùng do m·ªôt c√° nh√¢n vi·∫øt v√† s·ª≠ d·ª•ng cho ch√≠nh m√¨nh.", correct: true },
              { text: "'S·∫£n ph·∫©m ph·∫ßn m·ªÅm' th∆∞·ªùng c√≥ nhi·ªÅu ng∆∞·ªùi vi·∫øt, c·∫ßn ki·ªÉm th·ª≠ v√† t√†i li·ªáu ƒëi k√®m.", correct: true }
            ]
          },
          {
            type: "drag",
            q: "C√¢u 17: ƒêi·ªÅn t√™n lo·∫°i ph·∫ßn m·ªÅm th√≠ch h·ª£p v√†o ch·ªó tr·ªëng:",
            items: [
              "H·ªó tr·ª£ t·ª± ƒë·ªông h√≥a qu√° tr√¨nh ph√°t tri·ªÉn ph·∫ßn m·ªÅm:",
              "ƒêi·ªÅu h√†nh ho·∫°t ƒë·ªông ph·∫ßn c·ª©ng, cung c·∫•p ti·ªán √≠ch c∆° b·∫£n:",
              "H·ªó tr·ª£ ho·∫°t ƒë·ªông qu·∫£n l√Ω, s·∫£n xu·∫•t, kinh doanh:"
            ],
            draggables: ["Ph·∫ßn m·ªÅm c√¥ng c·ª•", "Ph·∫ßn m·ªÅm h·ªá th·ªëng", "Ph·∫ßn m·ªÅm nghi·ªáp v·ª•"],
            correctMatches: [
              ["Ph·∫ßn m·ªÅm c√¥ng c·ª•"],
              ["Ph·∫ßn m·ªÅm h·ªá th·ªëng"],
              ["Ph·∫ßn m·ªÅm nghi·ªáp v·ª•"]
            ]
          },
          {
            type: "drag",
            q: "C√¢u 18: ƒêi·ªÅn lo·∫°i ph·∫ßn m·ªÅm th√≠ch h·ª£p v√†o ch·ªó tr·ªëng:",
            items: [
              "T√≠ch h·ª£p nhi·ªÅu ph·∫ßn m·ªÅm, ph·∫ßn c·ª©ng, quy m√¥ l·ªõn:",
              "C√≥ nh√≥m ph√°t tri·ªÉn, ki·ªÉm th·ª≠ v√† t√†i li·ªáu ƒë·∫ßy ƒë·ªß:",
              "Do c√° nh√¢n vi·∫øt, d√πng cho ri√™ng m√¨nh, √≠t ki·ªÉm th·ª≠:"
            ],
            draggables: ["H·ªá th·ªëng", "S·∫£n ph·∫©m", "Ch∆∞∆°ng tr√¨nh", "·ª®ng d·ª•ng web", "Ph·∫ßn m·ªÅm ƒë√≥ng g√≥i"],
            correctMatches: [
              ["H·ªá th·ªëng"],
              ["S·∫£n ph·∫©m"],
              ["Ch∆∞∆°ng tr√¨nh"]
            ]
          },
          {
            type: "drag",
            q: "C√¢u 19: ƒêi·ªÅn ƒë√°p √°n th√≠ch h·ª£p v√†o ch·ªó tr·ªëng (C√°c t·∫ßng c·ªßa CNPM):",
            items: [
              "Li√™n quan ƒë·∫øn qu·∫£n l√Ω ti·∫øn ƒë·ªô, chi ph√≠, nh√¢n s·ª± v√† ch·∫•t l∆∞·ª£ng:",
              "Cung c·∫•p c√¥ng c·ª• h·ªó tr·ª£ t·ª± ƒë·ªông ho·∫∑c b√°n t·ª± ƒë·ªông cho c√°c t·∫ßng kh√°c:",
              "T·∫≠p trung v√†o m√¥ h√¨nh, ph∆∞∆°ng ph√°p v√† k·ªπ thu·∫≠t ph√°t tri·ªÉn:"
            ],
            draggables: ["T·∫ßng quy tr√¨nh", "T·∫ßng c√¥ng c·ª•", "T·∫ßng ph∆∞∆°ng ph√°p", "T·∫ßng nghi·ªáp v·ª•", "T·∫ßng v·∫≠n h√†nh"],
            correctMatches: [
              ["T·∫ßng quy tr√¨nh"],
              ["T·∫ßng c√¥ng c·ª•"],
              ["T·∫ßng ph∆∞∆°ng ph√°p"]
            ]
          },
          {
            type: "drag",
            q: "C√¢u 20: K√©o th·∫£ ƒë√°p √°n th√≠ch h·ª£p v√†o ch·ªó tr·ªëng",
            items: [
              "T√†i li·ªáu k·ªπ thu·∫≠t, h∆∞·ªõng d·∫´n v√† ph√°t tri·ªÉn ƒëi k√®m.",
              "C·∫•u tr√∫c d·ªØ li·ªáu v√† c∆° s·ªü d·ªØ li·ªáu ƒë∆∞·ª£c ch∆∞∆°ng tr√¨nh s·ª≠ d·ª•ng.",
              "G·ªìm m√£ ngu·ªìn, m√£ m√°y -- ch·ªâ th·ªã cho m√°y t√≠nh th·ª±c hi·ªán nhi·ªám v·ª•."
            ],
            draggables: ["T√†i li·ªáu li√™n quan", "D·ªØ li·ªáu", "Ch∆∞∆°ng tr√¨nh", "Website c·∫≠p nh·∫≠t ph·∫ßn m·ªÅm", "Ph·∫ßn c·ª©ng"],
            correctMatches: [
              ["T√†i li·ªáu li√™n quan"],
              ["D·ªØ li·ªáu"],
              ["Ch∆∞∆°ng tr√¨nh"]
            ]
          }
        ]
      },
      2: { name: "Ch·ªß ƒë·ªÅ 2", questions: [] },
      3: { name: "Ch·ªß ƒë·ªÅ 3", questions: [] },
      4: { name: "Ch·ªß ƒë·ªÅ 4", questions: [] },
      5: { name: "Ch·ªß ƒë·ªÅ 5", questions: [] },
      6: { name: "Ch·ªß ƒë·ªÅ 6", questions: [] },
      7: { name: "Ch·ªß ƒë·ªÅ 7", questions: [] },
      8: { name: "Ch·ªß ƒë·ªÅ 8", questions: [] },
      9: { name: "Ch·ªß ƒë·ªÅ 9", questions: [] }
    }
  },


  cnttud: {
    name: "C√îNG NGH·ªÜ PH√ÅT TRI·ªÇN ·ª®NG D·ª§NG",
    topics: {
      1: { name: "Ch·ªß ƒë·ªÅ 1", questions: [] },
      2: { name: "Ch·ªß ƒë·ªÅ 2", questions: [] },
      3: { name: "Ch·ªß ƒë·ªÅ 3", questions: [] },
      4: { name: "Ch·ªß ƒë·ªÅ 4", questions: [] },
      5: { name: "Ch·ªß ƒë·ªÅ 5", questions: [] },
      6: { name: "Ch·ªß ƒë·ªÅ 6", questions: [] },
      7: { name: "Ch·ªß ƒë·ªÅ 7", questions: [] },
      8: { name: "Ch·ªß ƒë·ªÅ 8", questions: [] },
      9: { name: "Ch·ªß ƒë·ªÅ 9", questions: [] }
    }
  },

  ct_dltt: {
    name: "C·∫§U TR√öC DL & TT",
    topics: {
      1: { name: "Ch·ªß ƒë·ªÅ 1", questions: [] },
      2: { name: "Ch·ªß ƒë·ªÅ 2", questions: [] },
      3: { name: "Ch·ªß ƒë·ªÅ 3", questions: [] },
      4: { name: "Ch·ªß ƒë·ªÅ 4", questions: [] },
      5: { name: "Ch·ªß ƒë·ªÅ 5", questions: [] },
      6: { name: "Ch·ªß ƒë·ªÅ 6", questions: [] },
      7: { name: "Ch·ªß ƒë·ªÅ 7", questions: [] },
      8: { name: "Ch·ªß ƒë·ªÅ 8", questions: [] },
      9: { name: "Ch·ªß ƒë·ªÅ 9", questions: [] }
    }
  }
};


        // Bi·∫øn to√†n c·ª•c
        // Bi·∫øn to√†n c·ª•c
let currentSubject = null;   // üëà TH√äM D√íNG N√ÄY
let currentTopic = 1;
let currentQuestion = 0;
let score = 0;
let timer = 0;
let timerInterval;
let userAnswers = {};
let isQuestionListVisible = false;

        
        // Kh·ªüi t·∫°o trang ch·ªß
        function initHome() {
    document.getElementById('choose-subject-title').style.display = 'block';
    const container = document.getElementById('topics-container');
    container.innerHTML = '';

    for (let key in data) {
        const subject = data[key];

        const card = document.createElement('div');
        card.className = 'topic-card';
        card.innerHTML = `<h3>${subject.name}</h3>`;

        card.onclick = () => loadSubject(key);
        container.appendChild(card);
    }
}


function loadSubject(subjectKey) {
    currentSubject = subjectKey;

    const container = document.getElementById('topics-container');
    const title = document.getElementById('subject-title');

    // HI·ªÜN T√äN H·ªåC PH·∫¶N
    title.textContent = data[subjectKey].name;
    title.style.display = 'block';
    document.getElementById('choose-subject-title').style.display = 'none';
    document.getElementById('back-home-btn').style.display = 'inline-block';
    container.innerHTML = '';

    const topics = data[subjectKey].topics;

    for (let id in topics) {
        const card = document.createElement('div');
        card.className = 'topic-card';
        card.innerHTML = `<h3>${topics[id].name}</h3>`;
        card.onclick = () => loadTopic(id);
        container.appendChild(card);
    }
}


        

        function shuffleArray(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

function shuffleAll() {
    let questions = data[currentSubject].topics[currentTopic].questions;

    // 1. ƒê·∫¢O TH·ª® T·ª∞ C√ÇU H·ªéI
    shuffleArray(questions);

    // 2. DUY·ªÜT T·ª™NG C√ÇU
    questions.forEach(q => {

        // ===== SINGLE & MULTI =====
        if ((q.type === "single" || q.type === "multi") && q.options) {

            let temp = q.options.map((opt, i) => ({
                text: opt,
                correct: q.type === "single"
                    ? i === q.correct
                    : q.correct.includes(i)
            }));

            shuffleArray(temp);

            q.options = temp.map(x => x.text);

            if (q.type === "single") {
                q.correct = temp.findIndex(x => x.correct);
            } else {
                q.correct = temp
                    .map((x, i) => x.correct ? i : -1)
                    .filter(i => i !== -1);
            }
        }

        // ===== DRAG DROP =====
        if (q.type === "drag") {

            // ƒê·∫£o v·∫ø tr√°i
            shuffleArray(q.items);

            // ƒê·∫£o th·∫ª k√©o
            shuffleArray(q.draggables);
        }

        // ===== TRUE/FALSE =====
        if (q.type === "truefalse") {
            shuffleArray(q.options);
        }

    });

    // 3. RESET B√ÄI L√ÄM
    userAnswers = {};
    currentQuestion = 0;

    initQuestionNumbers();
    showQuestion(0);
}

        // T·∫£i ch·ªß ƒë·ªÅ
        function loadTopic(topicId) {
            currentTopic = topicId;
            currentQuestion = 0;
            score = 0;
            timer = 0;
            userAnswers = {};
            isQuestionListVisible = false;
            
            document.getElementById('home-screen').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'block';
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('current-topic').textContent = data[currentSubject].topics[topicId].name;

            
            initQuestionNumbers();
            showQuestion(currentQuestion);
            startTimer();
            
            // ƒê·∫£m b·∫£o danh s√°ch c√¢u h·ªèi ·∫©n khi b·∫Øt ƒë·∫ßu
            document.getElementById('question-grid-container').classList.remove('show');
            document.getElementById('questionListBtn').classList.remove('active');
        }
        
        // Toggle hi·ªÉn th·ªã danh s√°ch c√¢u h·ªèi
        function toggleQuestionList() {
            const container = document.getElementById('question-grid-container');
            const button = document.getElementById('questionListBtn');
            
            isQuestionListVisible = !isQuestionListVisible;
            
            if (isQuestionListVisible) {
                container.classList.add('show');
                button.classList.add('active');
            } else {
                container.classList.remove('show');
                button.classList.remove('active');
            }
        }
        
        // Kh·ªüi t·∫°o danh s√°ch s·ªë c√¢u h·ªèi (M·ªöI - NH·ªé G·ªåN)
        function initQuestionNumbers() {
            const container = document.getElementById('question-numbers');
            container.innerHTML = '';
            const questions = data[currentSubject].topics[currentTopic].questions;

            
            for (let i = 0; i < questions.length; i++) {
                const numberDiv = document.createElement('div');
                numberDiv.className = 'question-number';
                if (i === 0) numberDiv.classList.add('current');
                numberDiv.textContent = i + 1;
                numberDiv.onclick = () => {
                    showQuestion(i);
                    // Tr√™n mobile, t·ª± ƒë·ªông ƒë√≥ng danh s√°ch sau khi ch·ªçn
                    if (window.innerWidth <= 768) {
                        toggleQuestionList();
                    }
                };
                
                container.appendChild(numberDiv);
            }
        }
        
        // Hi·ªÉn th·ªã c√¢u h·ªèi
        function showQuestion(index) {
            currentQuestion = index;
            const questions = data[currentSubject].topics[currentTopic].questions;
            const question = questions[index];
            
            updateQuestionNumbers();
            
            const container = document.getElementById('question-content');
            
            if (question.type === 'single' || question.type === 'multi') {
                renderMultipleChoice(question, container);
            } else if (question.type === 'drag') {
                renderDragDrop(question, container);
            } else if (question.type === 'truefalse') {
                renderTrueFalse(question, container);
            }
            
            updateNavigationButtons();
        }
        
        // Render c√¢u h·ªèi nhi·ªÅu l·ª±a ch·ªçn
        function renderMultipleChoice(question, container) {
            container.innerHTML = `
                <div class="question-text">${question.q}</div>
                <div class="options-container" id="options-container"></div>
            `;
            
            const optionsContainer = document.getElementById('options-container');
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option-item';
                optionDiv.textContent = option;
                
                if (userAnswers[currentQuestion] && userAnswers[currentQuestion].includes(index)) {
                    optionDiv.classList.add('selected');
                }
                
                optionDiv.onclick = () => {
                    if (question.type === 'single') {
                        optionsContainer.querySelectorAll('.option-item').forEach(item => {
                            item.classList.remove('selected');
                        });
                        optionDiv.classList.add('selected');
                        userAnswers[currentQuestion] = [index];
                    } else {
                        optionDiv.classList.toggle('selected');
                        const selected = [];
                        optionsContainer.querySelectorAll('.option-item.selected').forEach(item => {
                            selected.push(question.options.indexOf(item.textContent));
                        });
                        userAnswers[currentQuestion] = selected;
                    }
                    
                    markQuestionAsAnswered(currentQuestion);
                };
                
                optionsContainer.appendChild(optionDiv);
            });
        }
        
        // Render c√¢u h·ªèi ƒê√∫ng/Sai - ƒê√É S·ª¨A
    function renderTrueFalse(question, container) {

    container.innerHTML = `
        <div class="question-text">${question.q}</div>
        <div class="truefalse-container" id="truefalse-container"></div>
    `;

    if (!userAnswers[currentQuestion]) {
        userAnswers[currentQuestion] = {};
    }

    const tfContainer = document.getElementById("truefalse-container");

    question.options.forEach((option, index) => {
        const itemDiv = document.createElement("div");
        itemDiv.className = "truefalse-item";

        if (userAnswers[currentQuestion][index] !== undefined) {
            itemDiv.classList.add(
                userAnswers[currentQuestion][index]
                    ? "selected-true"
                    : "selected-false"
            );
        }

        itemDiv.innerHTML = `
            <div class="truefalse-text">
                ${index + 1}. ${option.text}
            </div>

            <div class="truefalse-buttons">
                <button class="btn btn-success"
                    onclick="selectTrueFalse(${currentQuestion}, ${index}, true)">
                    ƒê√∫ng
                </button>

                <button class="btn btn-danger"
                    onclick="selectTrueFalse(${currentQuestion}, ${index}, false)">
                    Sai
                </button>
            </div>
        `;

        tfContainer.appendChild(itemDiv);
    });
}



   function renderDragDrop(question, container) {
if (!userAnswers[currentQuestion]) {
    userAnswers[currentQuestion] = {};
}

   container.innerHTML = `
    <div class="question-text">${question.q}</div>
`;
    const wrapper = document.createElement("div");
    wrapper.className = "drag-wrapper";

    /* ===== KHU V·ª∞C TH·∫∫ K√âO ===== */
    const pool = document.createElement("div");
    pool.className = "drag-pool";
    pool.addEventListener("dragover", e => e.preventDefault());

pool.addEventListener("drop", e => {
    e.preventDefault();
    const item = window.draggedItem;
    if (!item) return;

    const oldZone = item.parentElement;

    if (oldZone && oldZone.classList.contains("drop-zone")) {

        const oldIndex = oldZone.dataset.index;

        userAnswers[currentQuestion][oldIndex] =
            (userAnswers[currentQuestion][oldIndex] || [])
            .filter(t => t !== item.textContent);

        if (userAnswers[currentQuestion][oldIndex].length === 0) {
            oldZone.innerHTML =
              `<span class="drop-placeholder">K√©o v√† th·∫£ c√°c ƒë√°p √°n v√†o ƒë√¢y</span>`;
        }
    }

    pool.appendChild(item);
});


    [...new Set(question.draggables)].forEach(text => {

    // N·∫øu item ƒë√£ ƒë∆∞·ª£c th·∫£ r·ªìi th√¨ KH√îNG t·∫°o l·∫°i
    let existed = false;

    if (userAnswers[currentQuestion]) {
        Object.values(userAnswers[currentQuestion]).forEach(arr => {
            if (arr.includes(text)) existed = true;
        });
    }

    if (existed) return;

    const item = document.createElement("div");
    item.className = "drag-item";
    item.textContent = text;

item.draggable = true;
item.addEventListener("dragstart", () => {
    window.draggedItem = item;
});

item.addEventListener("dblclick", () => {
    autoMoveToZone(item);
});


        pool.appendChild(item);
    });

    /* ===== KHU V·ª∞C TH·∫¢ ===== */
    const zones = document.createElement("div");
    zones.className = "drop-zones";

    question.items.forEach((label, index) => {

        const col = document.createElement("div");
        col.className = "drop-col";

        const title = document.createElement("div");
        title.className = "drop-title";
        title.textContent = (index + 1) + ") " + label;

        const zone = document.createElement("div");
zone.className = "drop-zone";
zone.dataset.index = index;

zone.innerHTML = `<span class="drop-placeholder">K√©o v√† th·∫£ c√°c ƒë√°p √°n v√†o ƒë√¢y</span>`;
// Hi·ªán l·∫°i ƒë√°p √°n c≈© n·∫øu c√≥
if (userAnswers[currentQuestion] &&
    userAnswers[currentQuestion][index]) {

    zone.innerHTML = "";

    userAnswers[currentQuestion][index].forEach(text => {

        const oldItem = document.createElement("div");
        oldItem.className = "drag-item";
        oldItem.textContent = text;
        oldItem.draggable = true;

        oldItem.addEventListener("dragstart", () => {
            window.draggedItem = oldItem;
        });
        oldItem.addEventListener("dblclick", () => {
    autoMoveToZone(oldItem);
});


        zone.appendChild(oldItem);
    });
}


        zone.addEventListener("dragover", e => e.preventDefault());

        zone.addEventListener("drop", e => {
    e.preventDefault();
    const item = window.draggedItem;
    if (!item) return;

    const oldZone = item.parentElement;

    if (oldZone && oldZone.classList.contains("drop-zone")) {
        const oldIndex = oldZone.dataset.index;

        userAnswers[currentQuestion][oldIndex] =
            (userAnswers[currentQuestion][oldIndex] || [])
            .filter(t => t !== item.textContent);

        if (userAnswers[currentQuestion][oldIndex].length === 0) {
            oldZone.innerHTML =
              `<span class="drop-placeholder">K√©o v√† th·∫£ c√°c ƒë√°p √°n v√†o ƒë√¢y</span>`;
        }
    }

    zone.querySelector(".drop-placeholder")?.remove();
    zone.appendChild(item);

    if (!userAnswers[currentQuestion][index]) {
        userAnswers[currentQuestion][index] = [];
    }

    userAnswers[currentQuestion][index].push(item.textContent);
});

        col.appendChild(title);
        col.appendChild(zone);
        zones.appendChild(col);
    });

    wrapper.appendChild(pool);
    wrapper.appendChild(zones);
    container.appendChild(wrapper);
}



function autoMoveToZone(item) {

    const zones = document.querySelectorAll(".drop-zone");

    for (let zone of zones) {

        // X√≥a kh·ªèi √¥ c≈©
        const oldZone = item.parentElement;
        if (oldZone && oldZone.classList.contains("drop-zone")) {

            const oldIndex = oldZone.dataset.index;

            userAnswers[currentQuestion][oldIndex] =
                (userAnswers[currentQuestion][oldIndex] || [])
                .filter(t => t !== item.textContent);

            if (userAnswers[currentQuestion][oldIndex].length === 0) {
                oldZone.innerHTML =
                    `<span class="drop-placeholder">K√©o v√† th·∫£ c√°c ƒë√°p √°n v√†o ƒë√¢y</span>`;
            }
        }

        zone.querySelector(".drop-placeholder")?.remove();
        zone.appendChild(item);

        const index = zone.dataset.index;

        if (!userAnswers[currentQuestion]) {
            userAnswers[currentQuestion] = {};
        }

        if (!userAnswers[currentQuestion][index]) {
            userAnswers[currentQuestion][index] = [];
        }

        userAnswers[currentQuestion][index].push(item.textContent);

        return; // v√†o √¥ ƒë·∫ßu ti√™n th√¨ d·ª´ng
    }
}

        
        // C·∫≠p nh·∫≠t s·ªë c√¢u h·ªèi
        function updateQuestionNumbers() {
            const numbers = document.querySelectorAll('.question-number');
            numbers.forEach((num, index) => {
                num.classList.remove('current', 'answered');
                if (index === currentQuestion) {
                    num.classList.add('current');
                }
                if (userAnswers[index]) {
                    num.classList.add('answered');
                }
            });
        }
        
        // ƒê√°nh d·∫•u c√¢u h·ªèi ƒë√£ tr·∫£ l·ªùi
        function markQuestionAsAnswered(index) {
            const numbers = document.querySelectorAll('.question-number');
            if (numbers[index]) {
                numbers[index].classList.add('answered');
            }
        }
        
        // C·∫≠p nh·∫≠t n√∫t ƒëi·ªÅu h∆∞·ªõng
        function updateNavigationButtons() {
            const questions = data[currentSubject].topics[currentTopic].questions;
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');
            
            prevBtn.disabled = currentQuestion === 0;
            
            if (currentQuestion === questions.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline-block';
            } else {
                nextBtn.style.display = 'inline-block';
                submitBtn.style.display = 'none';
            }
        }
        
        // ƒêi·ªÅu h∆∞·ªõng
        function prevQuestion() {
            if (currentQuestion > 0) {
                showQuestion(currentQuestion - 1);
            }
        }
        
        function nextQuestion() {
    const questions = data[currentSubject].topics[currentTopic].questions;
    if (currentQuestion < questions.length - 1) {
        showQuestion(currentQuestion + 1);
    }
}

        
        // Reset c√¢u h·ªèi hi·ªán t·∫°i
        function resetQuestion() {
            delete userAnswers[currentQuestion];
            showQuestion(currentQuestion);
        }
        
        // N·ªôp b√†i
        function submitQuiz() {
            clearInterval(timerInterval);           
            score = 0;
           const questions = data[currentSubject].topics[currentTopic].questions;           
            questions.forEach((question, index) => {
    if (userAnswers[index]) {

        if (question.type === 'single') {
            if (userAnswers[index][0] === question.correct) score++;
        }
        else if (question.type === 'multi') {
            const userAns = userAnswers[index].sort();
            const correctAns = question.correct.sort();
            if (JSON.stringify(userAns) === JSON.stringify(correctAns)) score++;
        }
        else if (question.type === 'truefalse') {
            let correctCount = 0;
            let totalOptions = question.options.length;

            question.options.forEach((option, optIndex) => {
                if (userAnswers[index][optIndex] === option.correct) {
                    correctCount++;
                }
            });
            if (correctCount === totalOptions) score++;
        }
        else if (question.type === 'drag') {
            let correct = true;

            question.correctMatches.forEach((ans, i) => {
                const user = userAnswers[index]?.[i] || [];
                if (JSON.stringify([...user].sort()) !== JSON.stringify([...ans].sort())) {
                    correct = false;
                }
            });

            if (correct) score++;
        }

    }
});

            
            showResults();
        }
        
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        function showResults() {
    const questions = data[currentSubject].topics[currentTopic].questions;
            const total = questions.length;
            const wrong = total - score;
            
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            
            document.getElementById('final-score').textContent = `${score}/${total}`;
            document.getElementById('final-time').textContent = formatTime(timer);
            document.getElementById('score-ten').textContent = ((score / total) * 10).toFixed(1);
            document.getElementById('correct-count').textContent = score;
            document.getElementById('wrong-count').textContent = wrong;
        }
        
        // L√†m l·∫°i b√†i
        function retryQuiz() {
            loadTopic(currentTopic);
        }
        
        // V·ªÅ trang ch·ªß
        function goHome() {
    backToHome();
}

        // Ch·ªçn ƒê√∫ng/Sai - ƒê√É S·ª¨A
       function selectTrueFalse(questionIndex, optionIndex, value) {

    if (!userAnswers[questionIndex]) {
        userAnswers[questionIndex] = {};
    }

    // L∆∞u ƒë√°p √°n
    userAnswers[questionIndex][optionIndex] = value;

    const items = document.querySelectorAll(".truefalse-item");

    items.forEach((item, i) => {

        // X√≥a m√†u c≈©
        item.classList.remove("selected-true", "selected-false");

        const btns = item.querySelectorAll("button");
        btns.forEach(btn => btn.classList.remove("selected", "true", "false"));

        // N·∫øu c√≥ ch·ªçn
        if (userAnswers[questionIndex][i] !== undefined) {

            const isTrue = userAnswers[questionIndex][i];

            // T√¥ m√†u khung
            item.classList.add(isTrue ? "selected-true" : "selected-false");

            // T√¥ m√†u n√∫t
            if (isTrue) {
                btns[0].classList.add("selected", "true");   // n√∫t ƒê√∫ng
            } else {
                btns[1].classList.add("selected", "false");  // n√∫t Sai
            }
        }
    });

    markQuestionAsAnswered(questionIndex);
}


function backToHome() {
    clearInterval(timerInterval);

    currentSubject = null;
    currentTopic = 1;
    currentQuestion = 0;
    score = 0;
    timer = 0;
    userAnswers = {};

    // Hi·ªán home
    document.getElementById('home-screen').style.display = 'block';
    document.getElementById('quiz-screen').style.display = 'none';
    document.getElementById('result-screen').style.display = 'none';

    // Hi·ªán l·∫°i ch·ªØ Ch·ªçn H·ªçc Ph·∫ßn
    document.getElementById('choose-subject-title').style.display = 'block';

    // ·∫®n t√™n h·ªçc ph·∫ßn + n√∫t quay l·∫°i
    document.getElementById('subject-title').style.display = 'none';
    document.getElementById('back-home-btn').style.display = 'none';

    initHome();
}
        
        // ƒê·∫øm th·ªùi gian
        function startTimer() {
            clearInterval(timerInterval);
            timer = 0;
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timer++;
                updateTimerDisplay();
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(timer / 60).toString().padStart(2, '0');
            const seconds = (timer % 60).toString().padStart(2, '0');
            document.getElementById('timer').textContent = `${minutes}:${seconds}`;
        }
        
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            return `${minutes}:${secs}`;
        }
        
        // FIX CHO MOBILE: NgƒÉn zoom khi nh·∫•p ƒë√∫p
        document.addEventListener('touchstart', function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });
        
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // FIX CHO IOS: NgƒÉn bounce khi cu·ªôn
        document.body.addEventListener('touchmove', function(e) {
            if (e.target.classList.contains('question-grid') || 
                e.target.closest('.question-grid')) {
                // Cho ph√©p cu·ªôn trong danh s√°ch c√¢u h·ªèi
                return;
            }
            if (document.body.scrollHeight <= window.innerHeight) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Th√™m s·ª± ki·ªán ph√≠m Enter ƒë·ªÉ chuy·ªÉn c√¢u
       document.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
        const questions =
            data[currentSubject]?.topics[currentTopic]?.questions || [];
                if (currentQuestion < questions.length - 1) {
                    nextQuestion();
                } else {
                    submitQuiz();
                }
            }
        });
        
        window.onload = function() {
            initHome();
        };
    </script>
</body>
</html>